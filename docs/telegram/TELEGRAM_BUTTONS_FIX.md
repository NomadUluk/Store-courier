# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ Telegram —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º API

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–Ω–æ–ø–∫–∏ –≤ Telegram —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –∏–∑-–∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π Telegram API.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. üîó –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã URL —Å—Å—ã–ª–∫–∏
**–ë—ã–ª–æ:**
```typescript
url: `${process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'}/courier/dashboard?order=${order.id}`
```

**–°—Ç–∞–ª–æ:**
```typescript
url: `https://localhost:3000/courier/dashboard?order=${order.id}`
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ **URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å https://** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ **–£–±—Ä–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –∏–∑ URL
- ‚úÖ **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ–º–µ–Ω** localhost:3000
- ‚úÖ **–ù–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤** –≤ URL

### 2. üìè –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ payload
```typescript
function checkMessageLength(message: string, keyboard?: any): boolean {
  const messageLength = message.length
  const keyboardLength = keyboard ? JSON.stringify(keyboard).length : 0
  const totalLength = messageLength + keyboardLength
  
  console.log(`Telegram: –î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: ${messageLength} —Å–∏–º–≤–æ–ª–æ–≤`)
  console.log(`Telegram: –î–ª–∏–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: ${keyboardLength} —Å–∏–º–≤–æ–ª–æ–≤`)
  console.log(`Telegram: –û–±—â–∞—è –¥–ª–∏–Ω–∞: ${totalLength} —Å–∏–º–≤–æ–ª–æ–≤`)
  
  if (totalLength > 4096) {
    console.warn('‚ö†Ô∏è Telegram: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 4096 —Å–∏–º–≤–æ–ª–æ–≤!')
    return false
  }
  
  return true
}
```

### 3. üõ°Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è
if (!checkMessageLength(message, keyboard)) {
  console.warn('Telegram: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∫–Ω–æ–ø–∫–∏ –∏–∑-–∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞')
  await bot.sendMessage(chatId, message, {
    parse_mode: 'Markdown'
  })
  return
}
```

## üéØ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è Telegram API

### ‚úÖ URL –∫–Ω–æ–ø–∫–∏:
- **–î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å https://**
- **–ù–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã**
- **–ù–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã**
- **–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º URL**

### ‚úÖ Payload –ª–∏–º–∏—Ç—ã:
- **–ú–∞–∫—Å–∏–º—É–º 4096 —Å–∏–º–≤–æ–ª–æ–≤** (—Å–æ–æ–±—â–µ–Ω–∏–µ + –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- **Fallback** –±–µ–∑ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–Ω–æ–ø–æ–∫:
```typescript
reply_markup: {
  inline_keyboard: [
    [
      {
        text: 'üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑',
        url: 'https://localhost:3000/courier/dashboard?order=12345678'
      }
    ]
  ]
}
```

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

### 1. üìã –î–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤:
```typescript
{
  text: 'üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑',
  url: `https://localhost:3000/courier/dashboard?order=${order.id}`
}
```

### 2. üì¶ –î–ª—è –ø—Ä–∏–Ω—è—Ç—ã—Ö –∑–∞–∫–∞–∑–æ–≤:
```typescript
{
  text: 'üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã',
  url: 'https://localhost:3000/courier/dashboard?tab=my'
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
Telegram: –î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: 245 —Å–∏–º–≤–æ–ª–æ–≤
Telegram: –î–ª–∏–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: 89 —Å–∏–º–≤–æ–ª–æ–≤
Telegram: –û–±—â–∞—è –¥–ª–∏–Ω–∞: 334 —Å–∏–º–≤–æ–ª–æ–≤
```

### 2. –ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç:
```
‚ö†Ô∏è Telegram: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 4096 —Å–∏–º–≤–æ–ª–æ–≤!
Telegram: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∫–Ω–æ–ø–∫–∏ –∏–∑-–∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤ Telegram:
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è** –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- ‚úÖ **–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ** –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
- ‚úÖ **–°—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å** –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üìã –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL** - –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å https://
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–ª–∏–Ω—É** - –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 4096 —Å–∏–º–≤–æ–ª–æ–≤
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–º–µ–Ω** - localhost:3000 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** - order ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º

### –ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç:
1. **–°–æ–∫—Ä–∞—Ç–∏—Ç–µ —Ç–µ–∫—Å—Ç** —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–£–ø—Ä–æ—Å—Ç–∏—Ç–µ –∫–Ω–æ–ø–∫–∏** - —É–±–µ—Ä–∏—Ç–µ –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã
3. **–†–∞–∑–¥–µ–ª–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å https://** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- ‚úÖ **–ù–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤** –≤ URL
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤** payload
- ‚úÖ **Fallback** –±–µ–∑ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üîÑ Workflow

### 1. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
### 2. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** —Å –∫–Ω–æ–ø–∫–∞–º–∏
### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã** payload
### 4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏** –∏–ª–∏ –±–µ–∑ –Ω–∏—Ö
### 5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**

–¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Telegram API!
