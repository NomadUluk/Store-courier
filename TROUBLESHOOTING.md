# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

## –ü—Ä–æ–±–ª–µ–º–∞: "Failed to fetch" –æ—à–∏–±–∫–∏

### ‚ùå –°–∏–º–ø—Ç–æ–º—ã:
```
Console TypeError
Failed to fetch
Call Stack
CourierDashboard.useCallback[fetchOrders]
CourierDashboard.useCallback[checkForNewOrders]
```

### üîç –ü—Ä–∏—á–∏–Ω—ã:
1. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω** - Next.js dev server –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö** - Prisma –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
3. **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Ä—Ç–æ–≤ –∏–ª–∏ firewall
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL** - API endpoints –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1. üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
npm run dev

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úì Ready in 2.3s
# ‚óã Local: http://localhost:3000
```

### 2. üîß –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üîß –¢–µ—Å—Ç" –≤ dashboard –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- ‚úÖ **–ï—Å–ª–∏ OK** - —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞** - —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### 3. üìä –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –í `checkForNewOrders`:
```typescript
catch (error) {
  console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤:', error)
  setConnectionStatus('disconnected')
  
  if (error instanceof Error) {
    if (error.name === 'AbortError') {
      console.log('‚è∞ –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤')
    } else if (error.message.includes('Failed to fetch')) {
      console.log('üåê –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ —Å–µ—Ä–≤–µ—Ä—É')
    }
  }
}
```

#### –í `fetchOrders`:
```typescript
catch (error) {
  if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {
    console.log('üåê –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω')
    setConnectionStatus('disconnected')
  }
}
```

### 4. üéØ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

#### –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
- üü¢ **–ü–æ–¥–∫–ª—é—á–µ–Ω–æ** - –≤—Å–µ API —Ä–∞–±–æ—Ç–∞—é—Ç
- üî¥ **–û—Ç–∫–ª—é—á–µ–Ω–æ** - –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- üü° **–ü—Ä–æ–≤–µ—Ä–∫–∞...** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

#### –°—á–µ—Ç—á–∏–∫ –∑–∞–∫–∞–∑–æ–≤:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
http://localhost:3000/api/test/connection

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
{
  "success": true,
  "data": {
    "status": "connected",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "server": "Next.js API"
  }
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints:
```bash
# –°—á–µ—Ç—á–∏–∫ –∑–∞–∫–∞–∑–æ–≤:
http://localhost:3000/api/courier/orders/count

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã:
http://localhost:3000/api/courier/orders/recent?limit=5
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ dashboard:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/courier/dashboard`
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîß –¢–µ—Å—Ç"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üîÑ Workflow –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
npm run dev
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
npm run db:push
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ö–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ API
- –û—Ç–∫—Ä–æ–π—Ç–µ `/api/test/connection`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ dashboard
- –û—Ç–∫—Ä–æ–π—Ç–µ `/courier/dashboard`
- –ù–∞–∂–º–∏—Ç–µ "üîß –¢–µ—Å—Ç"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üìã –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```
‚úÖ API: –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚úÖ API: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤: 3
‚úÖ –ó–∞–∫–∞–∑—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ: 5
```

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞: 500 Internal Server Error
üåê –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤: TypeError: Failed to fetch
```

## üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Prisma
npx prisma generate
npx prisma db push
```

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Ä—Ç–∞–º–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 3000 —Å–≤–æ–±–æ–¥–µ–Ω
netstat -an | findstr :3000
```

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env.local
cat .env.local
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ **–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –ª–æ–≥–∏** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ **Graceful handling** –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏
